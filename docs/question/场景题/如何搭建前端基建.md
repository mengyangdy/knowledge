# 如何从0到1搭建前端基建

## 什么是基建？

`基建`这个词无论身处哪个行业，基本都会存在；只是在最近几年的软件计算机行业中尤为流行

`在建筑行业`：一幢大厦所需的地基，脚手架，一块砖、一片瓦、一袋水泥、一扇窗等等咱都可以称之为基础建设的一部分

`在汽车行业`：一辆汽车所需的车架子、发动机、车轱辘、方向盘、门窗等等咱也可称之为基础建设的一部分

`在软件行业`：站在广义的角度上来讲基建包含了：业务基建、工程基建、前端基建、后端基建 等等

### 业务基建

`业务基建`是指公司某个业务团队层面所维护的 前端基建、后端基建、基本规范文档、产品规则、设计规范、研发流程、测试边界、上线标准以及业务中台等等的建设

业务基建是服务于业务团队

### 工程基建

`工程基建`指的是业务团队内所有工程师的的一些 编码规范、api规范、前后端协作、环境部署、微服务、微前端、性能、安全防御、统计监控、可视化 等等的建设

工程基建是服务于工程团队

### 前端基建

`前端基建`指的是业务团队内的前端工程师执行的一些基础建设，包括了前端规范文档、前端脚手架、前端模板、前端组件库、前端工具库、前端BFF、前端CI/CD的构建部署、前端数据埋点等等

### 后端基建

`后端基建`指的是业务团队内的后端工程师执行的一些基础建设，包括了后端规范文档、后端模板、安全、日志、微服务、RESTful API、中间件、数据库、分布式、权限控制、服务器性能并发等等

### 关系图

![](https://ik.imagekit.io/dylan467500/image.png?updatedAt=1732108877079)

## 为什么要做前端基建

有以下场景：

- 场景一
	- 公司来了个新人张三，正常流程是到公司的第一件事就是熟悉业务及技术栈以及规范等等
	- 但是却发现没有编程规范文档
	- 那么就会产生一个连锁反应
	- 每来一个新人就会按照自己的规范去编码，这样就会导致了代码的不一致，增加后续维护的成本
- 前端通讯在需求研发中：
	- 在不同的项目中，存在样式与交互一样的日历组件
	- 介于历史遗留问题，以及不同同学开发原因，导致同一套代码在不同的项目中同时存在
	- 当某天，想修改下日历组件的某个交互时，是不是要改两份代码？
- 新开一条项目县，前后端同学把项目创建好了
	- 开始配置dev环境、test环境、线上环境等等
	- 以前操作找运维、配置环境、配置完毕通知前后端人员
	- 现在操作步骤：进入可视化平台、配置环境系统、配置完成

- 前端基建意义与作用
	- 业务复用
	- 提升研发效率
	- 规范研发流程
	- 团队技术提升
	- 团队的技术影响力
	- 开源建设

## 前端基建如何推动落地

### 前端基建简要流程

前端基建最主要的难点莫过于如何去推动落地，其中不乏需要前端同学的付出，还需要领导的支持

1. 要合适的同学
	- 要有动力，切勿急于求成、半途而废，注重系统思维，需要稳定的同学
2. 要解决的问题
	- 针对公司现有的前端人员架构、技术架构以及业务架构做对应的方案
3. 要解决问题方案计划书
	- 出解决方案找领导支持，类似于有一个很好的idea，写了一份特别详细的商业计划书去找投资人拉投资的一个道理
4. 具体执行的步骤
	- 从渐进式出发，在针对现有业务不影响的前提下去做增量式开发

### 技术基建四大特性

- 技术的健性
- 基建的稳定性
- 研发的效率性
- 业务的体验性

## 前端基建都有什么

### 前端规范(Standard)

- 前端规范的意义
	- 降低开发的成本
	- 保证代码的一致性
	- 提升团队的整体效率


### 前端文档(Document)

一个合格的公司文档是必不可少的，无论是`新人自治`还是`老带新`，`业务转岗`等等

**前端文档的意义**

- 对新人友好，快速上手
- 快速融入团队
- 快速了解业务

**前端文档有哪些？**

- 新人文档
  - 公司介绍
  - 业务介绍
  - 团队介绍
  - 流程介绍
- 技术文档
- 业务文档
- 项目文档
- 计划文档
  - 月度计划
  - 季度计划
  - 年度计划
- 技术分享交流会文档

### 前端项目模板管理

公司前端所对应的项目模板，以便快速创建项目

场景一：

- 新增一条业务线
- 选定技术栈然后创建项目
- 往往这个时候需要耗费很多不必要的事件，还可能会存在技术栈的冲突
- 那么一个标准的前端项目模板就很重要了

前端项目模板的主要意义：

- 快速创建项目，提升效率
- 项目技术栈统一，方便管理

前端模板有：

- Vue项目模板
- Nuxt项目模板
- 小程序项目模板
- 微前端项目模板
- BFF项目模板
- 管理后台项目模板
- React项目模板
- Node项目模板

### 前端脚手架

前端脚手架的意义：

- 快速搭建项目
- 技术栈统一
- 规范代码风格
- 提升研发效率
- 自动化

前端脚手架有什么？

- 快速创建项目
- 代码规范
- mock数据
- 集合微前端
- commit hook
- 自动化部署
- 集合工具函数、hooks
- 插件、模板快速上手

### 前端组件库

现成的一些开源组件库中的样式与交互达不到公司设计师的要求，所以这时候`为了统一业务的设计规范与样式`

前端组件库的意义：

- 组件复用，提升研发效率

前端组件库有什么？

- icon图标
- button按钮
- input输入框
- checkbox复选框

### 前端响应式设计or自适应设计

`响应式设计`确实指的是一个网站能够根据不同的屏幕尺寸和设备特性调整布局，以提供最佳的用户体验

`自适应设计`通常指的是为不同的设备和屏幕尺寸提供不同的布局或界面

前端响应式设计：

- 一套代码提升研发效率
- 不同分辨率设备灵活性强
- 快速适配多端

前端自适应设计：

- 设计与体验较好
- 性能相对好

> 注意：所以如果公司PC端和H5端的排版设计有较大的出入还是建议使用自适应设计；反之可以考虑响应式设计

### 前端工具库(Hooks/Utils)

前端工具库的意义：

- 工具方法复用，提升研发效率
- 减少代码量
- 团队技术提升

前端工具库有什么？

- Query参数解析
- Device设备解析
- 环境区分
- LocalStorage封装
- Day日期格式的封装
- Thousands千分位格式化
- Debounce防抖
- Throttle节流
- Array数组去重
- Array数组扁平化
- Array排序
- 判断类型

### 前端工具自动化

- `前端工具自动化`主要针对的代码上层的格式、规范、测试方面的自动化工具
- `前端工具库`主要针对的是带啊层面的方法复用工具，所以其本质上有较为明显的区别

前端工具自动化的意义：

- 代码质量与风格的统一
- 自动化编码流程
- 提升效率

前端工具自动化有什么？

- ESLint自动化
- Git commit自动化

### 接口数据聚合(BFF)

前端BFF(Backends for frontends)即服务于前端的后端，也称之为聚合层或者中间层

主要将后端复杂的微服务聚合成对不同用户端(无线、Web、H5、第三方)友好和统一的API



### 前端SSR推进

服务器端渲染(Server-Side Rendering)是指由服务器端完成页面的HTML结构拼接的页面处理技术发送到浏览器，然后为其绑定状态与事件，称为完全可交互页面的过程。

简单理解就是由服务端写出，可以动态改变页面内容，即所谓的动态页面，早年的php、asp、jsp这些Server Page都是SSR的。

**前端SSR的目的：**

- 前后端分离
- 首屏加载速度快
- 利于SEO



### 前端自动化构建部署(CI/CD)

`前端 CI/CD` 一般是指持续集成、部署、发布的一个过程

用白话文讲，就是你每次 git commit 代码后，都会自动的为你部署项目至 `测试环境、预生产环境、生产环境`，不用你每次手动的去打包后 cv 到多个服务器和环境

**前端CI/CD的意义：**

- 提高开发人员的生产力
- 自动化发布
- 提高代码质量
- 更快地提供更新

**前端CI/CD有什么？**

- git自动触发
- 灵活的配置
- ESLintprettier检查
- 文件资源的压缩
- 重名文件替换/备份问题
- 缓存问题
- 如何做到用户无感知刷新
- 安全性保证
- 分布式部署
- 如何快速回滚

### 全链路前端监控/数据埋点系统

在大部分 To C 的项目中，我相信产品和运营都需要 `统计线上产品在用户中的行为和使用情况`，因为这样可以更快的去了解用户群里的使用情况，从而升级和迭代产品，使其更加贴近用户。

**前端监控/数据埋点的目的**

- 实现精准的点对点营销
- 可以做相关的分类统计
- 为用户画像的构建提供数据支持
- 支持产品研发以及优化用户体验

**前端监控/数据埋点有哪些数据**

- 行为数据：时间、地点、人物、交互、交互的内容
- 质量数据：浏览器加载情况、错误异常等
- 环境数据：浏览器相关的元数据以及地理、运营商等
- 运营数据：PV、UV、转化率、留存率（很直观的数据）

### 前端可视化平台

`前端可视化` 字面意义理解就是用肉眼可见的就称呼为前端可视化；即所见即所得

笔者这里的理解 `前端可视化` 包括了 `数据可视化、图形可视化、VR 全景可视化、中后台视觉可视化` 等等

前公司在基于前端基建这块，所做的可视化主要是基于大家的工作流程以及工作效率所做的一个 `工程可视化平台`

**前端工程可视化平台的目的：**

- 方便项目管理
- 高笑提升工作效率
- 一键搞定CI/CD流

**前端工程可视化平台有什么？**

- 数据监控和埋点
- 日志系统
- 仓库系统
- 项目搭建系统
- 性能检测系统
- 权限系统
- 运维系统
- 环境系统
- 博客系统

### 前端性能优化

**前端性能优化的意义**

- 页面加载的更快
- 更好的用户体验
- 降低服务器的负荷
- 提升编码的能力

**前端性能优化都有什么？**

- css放在头部
- css选择器优化
- JS变量问题
- JS事件委托
- web worker
- 使用字体图标
- 图片规范

- 减少HTTP请求

- 使用HTTP2

- CDN使用

- 缓存使用

- gzip
- 懒加载
- CSS重绘重排
- 雪碧图
- GPU渲染
- SSR使用
- tree shaking
- split chunks
- 拆包

### 前端低代码平台搭建

简单来讲，`低代码（Low Code）`就是一种可视化搭建系统，从字面意思来讲，一是可视化；二是少写代码。

`无代码（No Code）` 同样从字面上来理解，一是可视化，二是不写代码

前端低代码平台的意义：

- 降低开发成本
- 所见即所得
- 一站式研发
- 技术收敛
- 专业门槛低
- 对新人友好，上手快

### 微前端

`微前端（Micro-Frontends）` 并没有定义框架或 API，它其实是一个类似 `微服务架构` 的概念；将 `微服务` 的概念扩展到了前端世界；

说微服务可能有些前端同学会感觉陌生，以咱们前端的角度一句话概括就是： `将您的大型前端应用拆分为多个小型前端应用，这样每个小型前端应用都有自己的仓库，可以专注于单一的某个功能；`

需要强调的是，尽管我们将前端应用拆分为多个项目，但它们最终还是会被集成到一个单页前端应用程序中；因此，通过使用微前端架构，您不会在用户体验上有任何损失，只会有过之而无不及

**为什么要用为前端：**

- 技术上的灵活选择
- 更快的且独立的部署
- 团队代码的相互隔离
- 并行开发和团队的自治
- 项目的增量升级

微前端的价值：

- 提升构建效率
- 技术上的灵活选择
- 团队自治
- 产品动态化
- 独立开发/部署/交付
- 增量平滑升级
- 业务颗粒化





