---
title: 浏览器缓存如何影响HTTP请求不同的缓存策略会如何改变请求响应?
tags:
  - 浏览器
  - 面试题
date: 2024-06-03
---
# 一浏览器缓存如何影响HTTP请求?不同的缓存策略会如何改变请求响应?

浏览器缓存对HTTP请求的影响主要体现在减少网络请求的次数、缩短页面加载时间以及减轻服务器负担等方面。具体而言，不同的缓存策略会以如下方式改变请求和响应的行为：

## 1.1 无缓存情况

- **首次请求**：浏览器向服务器发送请求获取资源，服务器返回资源内容及相应的HTTP响应头，其中可能包含缓存控制指令（如`Cache-Control`, `Expires`, `ETag`, `Last-Modified`）。
- **后续请求**：如果没有缓存，每次请求都需要完整的往返服务器，导致延迟较高。

## 1.2 强缓存（无协商缓存）

- **首次请求**：与无缓存情况相同。
- **后续请求**：浏览器在请求资源前，检查本地缓存和`Cache-Control`或`Expires`指令。如果资源在有效期内，浏览器直接从缓存中加载资源，不会发送请求到服务器。这通常表现为状态码为200（从缓存中）的响应。

## 1.3 协商缓存（条件式缓存）

- **首次请求**：同无缓存情况。
- **后续请求**：即使强缓存过期，浏览器会发送一个包含验证条件（`If-Modified-Since`或`If-None-Match`）的请求到服务器。根据资源是否改变：
    - **资源未变**：服务器返回304 Not Modified响应，告诉浏览器继续使用缓存中的副本。
    - **资源已变**：服务器返回200 OK响应，并附带新的资源内容及缓存指令。

## 1.4 不同缓存策略的影响

- **强缓存策略**（如`Cache-Control: max-age=3600`）减少了网络流量和延迟，因为大部分请求在有效期内不需要网络通信。这对用户体验非常有利，特别是对于静态资源，如图片和样式文件。
    
- **协商缓存策略**（使用`ETag`或`Last-Modified`）虽然仍需要网络请求，但相比无缓存或强缓存过期，它可以减少数据传输量。服务器只需发送一个很小的304响应，而不是整个资源内容，节省了带宽和提高了响应速度。
    
- **无缓存或错误配置**可能导致资源每次都被重新请求，增加服务器压力，降低用户体验。
    

综上，合理的缓存策略设计是优化网站性能的关键，能够确保资源在恰当的时候被缓存，减少不必要的网络请求，同时确保用户能及时获取到更新的内容。

