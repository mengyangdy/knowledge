---
title: WebSocket与轮询(Polling)和长轮询(Long-Polling)之间有何区别?
tags:
  - 计算机网络
  - 面试题
date: 2024-06-03
---
# 一 WebSocket与轮询(Polling)和长轮询(Long-Polling)之间有何区别?

WebSocket、轮询（Polling）和长轮询（Long-Polling）都是实现浏览器与服务器间实时数据交互的技术，但它们的工作机制、效率和适用场景有所不同。

## 1.1 轮询（Polling）

- **机制**：轮询是最基础的实现方式，客户端按照一定的时间间隔（例如每秒或每几分钟）向服务器发送请求，询问是否有新数据。如果服务器有新数据，则响应这些数据；如果没有，则返回空或一个特定的无数据标记。
- **优点**：实现简单，对服务器和浏览器的支持要求低。
- **缺点**：频繁的请求可能造成大量的网络带宽和服务器资源的浪费，尤其是在数据更新不频繁的情况下。此外，数据传输存在延迟，实时性较差。

## 1.2 长轮询（Long-Polling）

- **机制**：长轮询是对传统轮询的一种改进，客户端发送请求后，服务器并不会立即响应，而是保持连接打开，直到有新数据可用时才返回响应。之后，客户端再次发起长轮询请求，如此循环。
- **优点**：相比轮询，减少了无效请求的数量，提高了数据传输的效率，提升了实时性。
- **缺点**：虽然改善了轮询的效率问题，但在高并发环境下，长时间保持连接可能导致服务器资源紧张。此外，由于HTTP协议的限制，长轮询不能做到真正的实时通信。

## 1.3 WebSocket

- **机制**：WebSocket是一种在单个TCP连接上进行全双工通信的协议。客户端与服务器通过握手升级HTTP连接为WebSocket连接后，双方都可以主动发送数据，无需像轮询或长轮询那样等待对方的请求。
- **优点**：
    - 实现了真正意义上的双向实时通信，数据传输几乎是即时的。
    - 一旦连接建立，可以持续传输数据，减少了连接建立和关闭的开销。
    - 更高效地利用网络资源，减少了不必要的HTTP头部信息传输。
- **缺点**：
    - 需要服务器和客户端都支持WebSocket协议。
    - 对于一些旧的浏览器或网络环境，可能存在兼容性问题。

## 1.4 总结

WebSocket提供了最佳的实时通信体验，特别适合需要高频度、低延迟交互的应用场景，如在线聊天、实时游戏、金融交易系统等。而轮询和长轮询则是较为简单的解决方案，适用于对实时性要求不高或对老旧浏览器兼容性有要求的场景。在选择技术方案时，需要根据具体的应用需求、目标用户群体以及技术支持能力综合考虑。

