---
title: TCP如何保证传输的可靠性
tags:
  - 计算机网络
  - 面试题
date: 2024-06-03
---
# 一 TCP如何保证传输的可靠性

TCP（传输控制协议）通过一系列机制来确保数据传输的可靠性，这些机制包括但不限于：

1. **序列号和确认应答（ACK）**： 每个TCP报文段都有一个序列号，用于标识数据包的顺序。接收方会发送一个包含确认应答（ACK）的报文，其中确认号（Acknowledgment Number）指示了下一个期望接收的数据包的序列号。这样，发送方可以确认数据是否按序到达。
    
2. **超时重传**： 发送方为每个发送的报文段启动一个计时器。如果在预定时间内没有收到该报文段的ACK，就会重传该报文。TCP还具备重传超时时间（RTO，Retransmission Timeout）的动态调整机制，依据网络状况和历史往返时间（RTT，Round-Trip Time）来优化重传策略。
    
3. **流量控制**： 使用滑动窗口协议来控制数据的发送速率，确保接收方不会被发送方的数据淹没。接收方在TCP报文段的窗口大小字段中通知发送方其当前可以接收的数据量，发送方据此调整发送速率。
    
4. **拥塞控制**： 为了避免网络拥塞，TCP实现了拥塞窗口（Congestion Window, cwnd）的概念，动态调整发送窗口大小。常见的拥塞控制算法有慢启动、拥塞避免、快重传和快恢复等，这些机制帮助TCP根据网络状况调整数据发送速率，避免过多的数据注入网络造成拥塞。
    
5. **连接管理**： TCP连接通过三次握手建立，确保双方都准备好进行通信，并通过四次挥手优雅地关闭连接，确保数据传输完毕且资源被正确释放。
    
6. **校验和**： TCP报文头包含校验和字段，用于检测数据在传输过程中是否出现错误。如果接收方计算的校验和与接收到的数据包中的校验和不匹配，数据将被丢弃，并可能触发重传。
    

通过上述机制的综合运用，TCP确保了数据的可靠传输，即使在网络环境不稳定或存在丢包、乱序、重复或错误的情况下也能保证数据的正确无误地送达。

