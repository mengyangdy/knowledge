---
title: 如何撤销Git中的最后一次提交?
tags:
  - ts
  - 面试题
date: 2024-05-29
---
# 一如何撤销Git中的最后一次提交?

在Git中撤销最后一次提交，你可以使用`git revert`或`git reset`命令，具体取决于你希望如何处理此次撤销操作以及是否希望保留更改。下面是两种方法的详细说明：

## 1.1 使用 `git revert`

**命令格式**:

```bash
git revert HEAD
```

**说明**:

- `git revert` 会创建一个新的提交来撤销指定提交所做的更改，这样保留了提交历史的完整性和可追溯性。在这个例子中，`HEAD` 指向当前的提交，因此`git revert HEAD`会撤销最近的一次提交。
- 这种方法不会丢失任何工作，即使是已提交但被撤销的更改也会作为新提交的一部分被记录下来。
- 如果你想要撤销多次提交，可以指定多个`HEAD`，如 `git revert HEAD~2` 会撤销最近的两次提交。

## 1.2 使用 `git reset`

**软重置（不改变工作目录和索引）**:

```bash
git reset --soft HEAD~1
```

**混合重置（改变索引但不改变工作目录）**:

```bash
git reset HEAD~1
```

**硬重置（同时改变工作目录和索引，可能会丢失未提交的改动）**:

```bash
git reset --hard HEAD~1
```

**说明**:

- `git reset` 会移动HEAD指针到指定的提交，并根据提供的选项决定是否重置索引和工作目录。`HEAD~1` 指向上一个提交。
- `--soft` 选项仅移动HEAD，不改变索引或工作目录，撤销提交的同时保留更改在暂存区，适合立刻用一个新的提交修正。
- `--mixed` 是默认行为，会移动HEAD并重置索引，但不改变工作目录中的文件，撤销的更改会保留在工作目录中未被跟踪。
- `--hard` 会将HEAD、索引和工作目录都重置到指定的提交状态，这会永久丢失自那之后的所有未提交更改，请谨慎使用。

## 1.3 总结

- 如果你希望保留撤销操作的历史记录，并对外展示这一过程，应该使用`git revert`。
- 如果你不希望保留这次提交的记录，并且确定撤销的更改不再需要，可以考虑使用`git reset`，但请特别注意`--hard`选项的使用，以防数据丢失。

