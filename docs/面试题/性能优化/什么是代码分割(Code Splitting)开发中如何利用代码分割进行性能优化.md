---
title: 什么是代码分割(Code Splitting)开发中如何利用代码分割进行性能优化?
tags:
  - 性能优化
  - 面试题
date: 2024-05-29
---
# 一 什么是代码分割(Code Splitting)?开发中如何利用代码分割进行性能优化?

代码分割（Code Splitting）是一种前端性能优化技术，它允许将应用程序的代码基础按需加载，而不是一次性加载所有代码。在传统的开发模式中，所有代码会被编译打包成一个或几个较大的文件，这可能导致用户在首次访问页面时需要下载大量数据，延长了页面的加载时间。而通过代码分割，我们可以将代码拆分成多个较小的“块”（chunks），每个块负责应用的一部分功能，只有当这些功能真正需要时，对应的代码块才会被加载到浏览器中。这样可以显著提高页面的加载速度，提升用户体验。

## 1.1 如何利用代码分割进行性能优化：

1. **动态导入（Dynamic Import）**: 在JavaScript中，可以使用`import()`函数来动态地加载模块。这样，模块的加载将在运行时发生，而不是在初始页面加载时。例如：

```js
import('./myModule.js').then((module) => {
// 使用module中的导出
});
```
 
2. **路由级别分割**: 在SPA（单页应用）中，可以根据不同的路由来分割代码。这意味着当用户导航到某个特定页面时，仅加载该页面所需的功能模块。
    
3. **库代码分割**: 将第三方库或者不常变更的代码分割到单独的chunk中，这样这些代码可以被浏览器缓存起来，复用性强，减少后续页面加载时的网络请求。
    
4. **延迟加载非关键路径代码**: 将不影响首屏渲染的代码（如动画库、部分UI组件）设置为懒加载，直到用户交互或滚动到可视区域时才加载。
    
5. **利用构建工具**: Webpack、Rollup、Vite等现代构建工具都提供了对代码分割的支持，通过配置文件可以定义入口点、拆分点以及手动指定某些模块的分割策略。
    
6. **使用魔法注释（Magic Comments）**: 在某些情况下，可以通过特定的注释来指导构建工具如何进行代码分割，例如在Webpack中使用`/* webpackChunkName: "chunk-name" */`来命名chunk。
    
7. **预加载与预读取**: 结合代码分割，还可以利用`<link rel="preload">`和`<link rel="prefetch">`标签预加载或预读取可能即将使用的代码块，进一步优化加载体验。
    

通过上述方法，开发者可以有效地控制资源的加载顺序和时机，从而减少初始加载时间，优化运行时的内存占用，提升应用的整体性能。

